<script setup lang="ts">
import type { CSSProperties } from 'vue'
import { computed, reactive, ref } from 'vue'
// import { useData } from 'vitepress'

import { isClient, useParallax } from '@vueuse/core'

const target = ref(isClient ? document && document.body : null)
const parallax = reactive(useParallax(target))

// const { site, frontmatter } = useData()
// const heroText = computed(() => frontmatter.value.heroText || site.value.title)

const containerStyle: CSSProperties = {
  display: 'flex',
  flexDirection: 'column',
  justifyContent: 'center',
  alignItems: 'center',
  minHeight: '350px',
  transition: '.3s ease-out all',

  perspective: '300px'
}

const cardStyle = computed(() => ({
  height: '20rem',
  width: '15rem',
  borderRadius: '5px',
  transition: '.3s ease-out all',
  transform: `rotateX(${parallax.roll * 20}deg) rotateY(${parallax.tilt * 20}deg)`
}))

const layerBase: CSSProperties = {
  position: 'absolute',
  width: '100%',
  transition: '.3s ease-out all'
}

const layer0 = computed(() => ({
  ...layerBase,
  transform: `translateX(${parallax.tilt * 10}px) translateY(${parallax.roll * 10}px) scale(1.33)`
}))

// const layer1 = computed(() => ({
//   ...layerBase,
//   marginTop: '16rem',
//   transform: `translateX(${parallax.tilt}px) translateY(${parallax.roll}px) scale(1.33)`,
// }))

const startColor = computed(() => `rgb(34, ${Math.floor(211 - parallax.tilt * 100)}, ${Math.floor(238 - parallax.roll * 10)})`)
const endColor = computed(() => `rgb(37, ${Math.floor(99 - parallax.tilt * 100)}, ${Math.floor(238 - parallax.roll * 10)})`)
</script>

<template>
  <div m="t-16" :style="containerStyle">
    <div :style="cardStyle">
      <figure class="figure" :style="layer0">
        <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="200" height="200"><path d="M778.88 460.757333c11.861333-12.074667 12.288-28.714667 1.322667-39.466666-10.837333-10.709333-26.88-10.282667-38.784 1.450666-23.466667 23.04-46.762667 46.208-70.016 69.504-10.666667 10.709333-11.52 26.88-0.981334 37.546667 24.149333 24.704 48.64 49.194667 73.685334 72.789333 4.650667 4.309333 13.056 6.4 19.712 6.528 10.837333 0.128 18.816-6.4 22.485333-16.938666 3.669333-10.325333 2.005333-19.925333-5.76-27.818667-6.485333-6.570667-13.226667-12.8-19.968-19.114667l-5.077333-4.693333 0.768-1.109333 0.768-1.109334h34.944c61.141333 0 103.04-41.685333 103.125333-102.613333 0.128-38.784 0.128-77.44 0-116.224 0-6.4-0.085333-12.842667-1.109333-19.2-8.405333-49.834667-48.213333-83.072-99.84-83.072-94.165333-0.085333-188.330667-0.042667-282.496 0H359.808l0.042667-4.096v-6.101333c-1.450667-44.416-34.474667-77.653333-79.018667-78.677334-25.386667-0.426667-50.773333-0.554667-76.032 0.213334a78.506667 78.506667 0 0 0-76.202667 76.117333 1327.061333 1327.061333 0 0 0 0 78.592c1.109333 41.386667 34.645333 75.093333 75.989334 76.330667 26.154667 0.768 52.394667 0.682667 78.549333 0A78.464 78.464 0 0 0 357.973333 296.96c1.28-5.888 1.706667-11.946667 2.218667-18.048l0.682667-7.68 1.834666-0.128c1.109333-0.085333 2.176-0.213333 3.242667-0.213333h107.861333c107.904 0 215.722667 0 323.498667 0.128 24.618667 0 43.904 18.730667 44.117333 43.221333 0.426667 42.666667 0.426667 85.333333 0 128a42.624 42.624 0 0 1-38.698666 42.282667c-10.154667 0.896-20.48 0.682667-31.744 0.426666-5.376-0.085333-10.922667-0.213333-16.768-0.213333 3.626667-3.541333 6.997333-6.784 10.24-9.813333 5.12-5.034667 9.856-9.557333 14.464-14.208z m-227.712-64.597333a1428.821333 1428.821333 0 0 0-78.549333 0 78.421333 78.421333 0 0 0-74.666667 62.72c-1.194667 5.504-1.621333 11.178667-2.133333 17.024-0.213333 2.986667-0.426667 5.973333-0.768 8.96H231.082667c-60.586667 0-102.485333 41.813333-102.741334 102.314667a20607.146667 20607.146667 0 0 0 0 117.12c0 6.4 0.128 12.8 1.237334 19.157333 8.618667 49.28 48.213333 82.432 98.602666 82.56H518.826667l-7.808 7.68c-5.802667 5.717333-10.965333 10.794667-16 15.914667-12.544 12.629333-13.312 28.928-2.005334 39.978666 11.093333 10.88 27.264 10.24 39.424-1.877333 22.528-22.357333 45.013333-44.885333 67.413334-67.370667 13.482667-13.653333 13.397333-28.672-0.341334-42.538666-14.805333-14.933333-29.653333-29.738667-44.544-44.586667l-22.272-22.229333c-12.544-12.501333-28.928-13.184-40.106666-1.792-10.88 11.093333-10.112 27.178667 2.090666 39.466666 5.333333 5.333333 10.837333 10.538667 16.298667 15.744l6.4 6.101334-1.322667 1.962666H229.205333c-29.013333 0-47.445333-18.346667-47.573333-47.530666a21278.72 21278.72 0 0 1 0-118.784c0.128-29.568 18.517333-47.744 48.213333-47.744h157.226667c1.450667 0 2.901333 0.085333 4.522667 0.213333l4.266666 0.213333-0.042666 3.925334v6.613333c1.450667 43.434667 34.56 76.8 78.122666 77.781333 25.6 0.682667 51.285333 0.682667 76.885334-0.085333a78.592 78.592 0 0 0 76.117333-76.245333c0.810667-26.154667 0.810667-52.437333 0-78.549334a78.293333 78.293333 0 0 0-75.776-76.117333z m343.808 370.56l-0.085333 12.373333a1.962667 1.962667 0 0 0 1.109333 0c-0.341333 5.674667-0.426667 11.434667-0.554667 17.152a222.421333 222.421333 0 0 1-2.645333 36.053334c-6.656 35.84-38.016 61.568-74.666667 62.464-26.197333 0.682667-52.48 0.768-78.592 0a78.592 78.592 0 0 1-75.776-75.562667 1381.418667 1381.418667 0 0 1 0-80.213333 78.592 78.592 0 0 1 75.349334-75.093334 1389.184 1389.184 0 0 1 80.213333 0c40.448 1.066667 73.898667 34.773333 75.434667 75.093334 0.426667 9.173333 0.298667 18.432 0.213333 27.733333z" ></path></svg>
      </figure>
    </div>
  </div>
</template>
